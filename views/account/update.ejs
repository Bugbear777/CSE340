<main class="account-main">
  <section class="account-card">
    <h1><%= title %></h1>

    <% if (locals.messages && typeof locals.messages === "function") { %>
      <%- locals.messages() %>
    <% } %>

    <% if (errors && errors.length) { %>
      <div class="notice error">
        <ul>
          <% errors.forEach(e => { %>
            <li><%= e.msg ?? e %></li>
          <% }) %>
        </ul>
      </div>
    <% } %>

    <!-- =========================
         Account Update Form
         ========================= -->
    <form class="form" method="post" action="/account/update" novalidate>
      <fieldset>
        <legend>Account Update</legend>

        <input type="hidden" name="account_id" value="<%= account_id ?? accountData?.account_id ?? '' %>">

        <div class="form-group">
          <label for="account_firstname">First Name</label>
          <input
            id="account_firstname"
            name="account_firstname"
            type="text"
            required
            value="<%= (accountData && accountData.account_firstname) ? accountData.account_firstname : '' %>"
            autocomplete="given-name"
          >
        </div>

        <div class="form-group">
          <label for="account_lastname">Last Name</label>
          <input
            id="account_lastname"
            name="account_lastname"
            type="text"
            required
            value="<%= (accountData && accountData.account_lastname) ? accountData.account_lastname : '' %>"
            autocomplete="family-name"
          >
        </div>

        <div class="form-group">
          <label for="account_email">Email Address</label>
          <input
            id="account_email"
            name="account_email"
            type="email"
            required
            value="<%= (accountData && accountData.account_email) ? accountData.account_email : '' %>"
            autocomplete="email"
          >
        </div>

        <div class="form-actions">
          <input class="btn btn--primary" type="submit" value="Update Account">
        </div>
      </fieldset>
    </form>

    <hr>

    <!-- =========================
         Change Password Form
         ========================= -->
    <form class="form" method="post" action="/account/update-password" novalidate>
      <fieldset>
        <legend>Change Password</legend>

        <input type="hidden" name="account_id" value="<%= account_id ?? accountData?.account_id ?? '' %>">

        <div class="form-group">
          <label for="account_password">New Password</label>
          <input
            id="account_password"
            name="account_password"
            type="password"
            required
            pattern="^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[^A-Za-z0-9]).{12,}$"
            aria-describedby="password-help"
            autocomplete="new-password"
          >
          <p id="password-help" class="form-help">
            Entering a new password will replace your current password.
            Password must be at least 12 characters and include: an uppercase letter, a lowercase letter,
            a number, and a special character.
          </p>
        </div>

        <div class="form-actions">
          <input class="btn btn--primary" type="submit" value="Change Password">
        </div>
      </fieldset>
    </form>
  </section>
</main>
